<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mindset Flip</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Anton&family=Inter:wght@400&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Anton', sans-serif;
            touch-action: none; 
        }

        .swipe-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            aspect-ratio: 16 / 9; /* Default aspect ratio for desktop */
            margin: auto;
            overflow: hidden;
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            user-select: none; 
            background-color: #ffffff; 
        }

        /* Mobile-specific adjustments */
        @media (max-width: 640px) {
            .swipe-container {
                aspect-ratio: 4 / 5; /* Taller aspect ratio for mobile */
            }
        }

        .swipe-image-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .swipe-image {
            width: 100%;
            height: 100%;
            object-fit: cover; /* Fill the container, cropping if necessary */
            pointer-events: none; 
        }

        #negative-side {
            z-index: 1;
        }

        #positive-side {
            z-index: 2;
            clip-path: polygon(0 0, 0% 0, 0% 100%, 0 100%); /* Start hidden */
        }
        
        .message-text {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-size: clamp(1.2rem, 6vw, 2.5rem); /* Slightly larger font on mobile */
            font-weight: 400;
            text-align: center;
            color: black; 
            padding: 1rem;
            width: 45%;
            line-height: 1.1;
            transition: opacity 0.2s ease-out; 
            text-shadow: 1px 1px 3px rgba(255, 255, 255, 0.4); 
        }

        #negative-text {
            right: 5%;
            z-index: 1;
        }

        #positive-text {
            left: 5%;
            z-index: 3; 
            clip-path: polygon(0 0, 0% 0, 0% 100%, 0 100%); 
        }

        #slider {
            position: absolute;
            top: 0;
            left: 0%; 
            width: 4px;
            height: 100%;
            background-color: rgba(107, 114, 128, 0.5);
            cursor: ew-resize;
            z-index: 4;
            transform: translateX(-50%);
        }

        #slider-handle {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 44px; 
            height: 44px;
            background-color: #10B981; 
            border-radius: 50%;
            border: 2px solid #059669; 
            transform: translate(-50%, -50%);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 10px rgba(0,0,0,0.2);
        }
        
        #slider-handle svg {
            width: 24px;
            height: 24px;
            color: white; 
        }

    </style>
</head>
<body class="bg-gray-800">
    <main class="flex flex-col items-center p-4 sm:p-6 max-w-3xl mx-auto">
        <div class="text-center mb-4">
            <h1 class="text-3xl sm:text-4xl font-bold text-white">Change Your Thinking</h1>
            <p class="text-gray-400 mt-3 text-sm sm:text-base font-sans" style="font-family: 'Inter', sans-serif;">Urges can feel pretty “loud” in your mind. It’s important that you learn how to talk back to these urges. Here are some suggestions for having a more positive mindset about quitting and urges:</p>
        </div>
        
        <!-- Navigation Buttons -->
        <div class="flex items-center space-x-4 mb-4">
            <button id="prev-btn" class="bg-gray-700 text-white hover:bg-gray-600 font-bold py-2 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105">
                Previous
            </button>
            <span id="slide-counter" class="text-gray-400 font-medium text-sm sm:text-base">1 / 14</span>
            <button id="next-btn" class="bg-gray-700 text-white hover:bg-gray-600 font-bold py-2 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105">
                Next
            </button>
        </div>

        <p class="text-gray-400 text-center mb-4 text-sm font-sans" style="font-family: 'Inter', sans-serif;">Swipe the green handle to reveal a new mindset.</p>

        <div id="swipe-container" class="swipe-container">
            <!-- Base Layer: Negative -->
            <div id="negative-side" class="swipe-image-container">
                <img src="https://static.wixstatic.com/media/43bd37_7a86a3cc63fe412d904be62db3b7b650~mv2.jpg" class="swipe-image" alt="Negative thought visualization" onerror="this.onerror=null;thissrc='https://placehold.co/800x450/000000/ffffff?text=Image+Not+Found';">
                <div id="negative-text" class="message-text"></div>
            </div>
            
            <!-- Overlay Layer: Positive -->
            <div id="positive-side" class="swipe-image-container">
                <img src="https://static.wixstatic.com/media/43bd37_94fc0b8331274dea8da06bb31a283444~mv2.jpg" class="swipe-image" alt="Positive thought visualization" onerror="this.onerror=null;this.src='https://placehold.co/800x450/000000/ffffff?text=Image+Not+Found';">
            </div>
            <div id="positive-text" class="message-text"></div>

            <!-- Slider handle -->
            <div id="slider">
                <div id="slider-handle">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M10 19l-7-7 7-7m4 14l7-7-7-7" />
                    </svg>
                </div>
            </div>
        </div>
    </main>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const container = document.getElementById('swipe-container');
            const positiveSide = document.getElementById('positive-side');
            const positiveText = document.getElementById('positive-text');
            const negativeText = document.getElementById('negative-text');
            const slider = document.getElementById('slider');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const slideCounter = document.getElementById('slide-counter');

            const content = [
                { urge: "I NEED TO SMOKE!", affirmation: "THIS FEELING WILL PASS!" },
                { urge: "JUST ONE WON'T HURT.", affirmation: "I'M PROUD OF STAYING QUIT." },
                { urge: "EVERYONE ELSE IS.", affirmation: "I'M DOING THIS FOR MY HEALTH." },
                { urge: "I CAN'T HANDLE THIS.", affirmation: "I AM STRONG ENOUGH." },
                { urge: "I MISS VAPING WITH FRIENDS.", affirmation: "I CAN ENJOY FRIENDS WITHOUT VAPING." },
                { urge: "QUITTING IS TOO HARD.", affirmation: "I'VE ALREADY COME SO FAR." },
                { urge: "THE CRAVINGS ARE TOO STRONG.", affirmation: "CRAVINGS ARE TEMPORARY." },
                { urge: "I'LL QUIT TOMORROW.", affirmation: "MY HEALTH IS WORTH IT TODAY." },
                { urge: "I MUST ACT ON THIS FEELING!", affirmation: "AN URGE IS A FEELING, NOT A COMMAND." },
                { urge: "I HATE THIS DISCOMFORT!", affirmation: "IT'S OKAY TO FEEL SOME DISCOMFORT." },
                { urge: "THIS WILL NEVER END!", affirmation: "THIS WILL PASS." },
                { urge: "THIS IS IMPOSSIBLE!", affirmation: "I'M PROUD OF HOW HARD I'M WORKING." },
                { urge: "I'M ANXIOUS, I NEED TO SMOKE.", affirmation: "IT'S OKAY TO FEEL ANXIOUS." },
                { urge: "I'M ANXIOUS, I NEED TO VAPE.", affirmation: "THIS DISCOMFORT WILL PASS." }
            ];
            let currentContentIndex = 0;
            let isDragging = false;
            
            function updateContent() {
                const current = content[currentContentIndex];
                negativeText.textContent = current.urge;
                positiveText.textContent = current.affirmation;
                slideCounter.textContent = `${currentContentIndex + 1} / ${content.length}`;
            }

            function setSliderPosition(percent) {
                percent = Math.max(0, Math.min(100, percent));
                slider.style.left = `${percent}%`;
                
                const clipPath = `polygon(0 0, ${percent}% 0, ${percent}% 100%, 0 100%)`;
                positiveSide.style.clipPath = clipPath;
                positiveText.style.clipPath = clipPath;

                const opacity = Math.max(0, 1 - (percent / 50));
                negativeText.style.opacity = opacity;
            }
            
            function moveSlider(x) {
                const rect = container.getBoundingClientRect();
                const percent = ((x - rect.left) / rect.width) * 100;
                setSliderPosition(percent);
            }

            function showNext() {
                currentContentIndex = (currentContentIndex + 1) % content.length;
                updateContent();
                setSliderPosition(0);
            }
            
            function showPrev() {
                currentContentIndex = (currentContentIndex - 1 + content.length) % content.length;
                updateContent();
                setSliderPosition(0);
            }

            function onDown(e) {
                isDragging = true;
            }

            function onUp(e) {
                isDragging = false;
            }



            function onMove(e) {
                if (!isDragging) return;
                const x = e.clientX || e.touches[0].clientX;
                moveSlider(x);
            }

            slider.addEventListener('mousedown', onDown);
            document.addEventListener('mouseup', onUp);
            document.addEventListener('mousemove', onMove);
            slider.addEventListener('touchstart', onDown);
            document.addEventListener('touchend', onUp);
            document.addEventListener('touchmove', onMove);
            nextBtn.addEventListener('click', showNext);
            prevBtn.addEventListener('click', showPrev);

            updateContent();
            setSliderPosition(0); 
        });
    </script>
</body>
</html>
